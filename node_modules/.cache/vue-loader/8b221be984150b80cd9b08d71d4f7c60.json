{"remainingRequest":"/Users/shonichikun/Downloads/西浦资料/authorityForecast/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/shonichikun/Downloads/西浦资料/authorityForecast/src/frameworks/transition.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/shonichikun/Downloads/西浦资料/authorityForecast/src/frameworks/transition.vue","mtime":1657271700000},{"path":"/Users/shonichikun/Downloads/西浦资料/authorityForecast/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shonichikun/Downloads/西浦资料/authorityForecast/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/shonichikun/Downloads/西浦资料/authorityForecast/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shonichikun/Downloads/西浦资料/authorityForecast/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBjb25zdGFudCBmcm9tICJAL2Fzc2V0cy9qcy9jb25zdGFudCI7DQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAidHJhbnNpdGlvbiIsDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICB9Ow0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgIC8vIGNhc+mHjeWumuWQkeWbnuadpeeahCB1cmzkuK3ojrflj5YgY29kZeWPguaVsA0KICAgICAgbGV0IGNvZGUgPSB1dGlsLmdldENvZGUoKTsNCiAgICAgIGlmIChjb2RlKSB7DQogICAgICAgIC8vIOagueaNriBjb2Rl6I635Y+WIHRva2VuDQogICAgICAgIHRoaXMuZ2V0VG9rZW5CeUNvZGUoY29kZSk7DQogICAgICB9DQogICAgICBlbHNlIHsNCiAgICAgICAgdXRpbC5sb2dpbigpOw0KICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICBnZXRVc2VySW5mbyh0b2tlbikgew0KICAgICAgICBhZGFwdGVyLmdldFVzZXJJbmZvKHthY2Nlc3NfdG9rZW46IHRva2VufSwgZnVuY3Rpb24ocmVzKSB7DQogICAgICAgICAgaWYgKHJlcy5kYXRhKSB7DQogICAgICAgICAgICAgIHZhciB1c2VySW5mbyA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXJJZCIsIHVzZXJJbmZvLmlkKTsNCiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidXNlckluZm8iLCBKU09OLnN0cmluZ2lmeSh1c2VySW5mbykpOw0KICAgICAgICAgICAgICBhZGFwdGVyLmdldFVzZXJSb2xlKHsNCiAgICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogdG9rZW4sDQogICAgICAgICAgICAgICAgICBvZmZzZXQ6IC0xDQogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24odERhdGEpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0RGF0YS5kYXRhKTsNCiAgICAgICAgICAgICAgICB2YXIgcm9sZXMgPSB0RGF0YS5kYXRhLmRhdGEgfHwgW10NCiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJyb2xlcyIsIEpTT04uc3RyaW5naWZ5KHJvbGVzKSk7DQogICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIGxvY2F0aW9uLmhvc3Q7DQogICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJbmZvLmlkDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIGdldFRva2VuQnlDb2RlKGNvZGUpIHsNCiAgICAgICAgdmFyIHVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIGxvY2F0aW9uLmhvc3Q7DQogICAgICAgIHZhciBkYXRhID0gew0KICAgICAgICAgICJncmFudF90eXBlIjogICJhdXRob3JpemF0aW9uX2NvZGUiLA0KICAgICAgICAgICJjbGllbnRfaWQiOiBjb25zdGFudC5hcHBJZCwNCiAgICAgICAgICAiY29kZSI6IGNvZGUsDQogICAgICAgICAgImNsaWVudF9zZWNyZXQiOiBjb25zdGFudC5jbGllbnRfc2VjcmV0LA0KICAgICAgICAgICJyZWRpcmVjdF91cmkiIDogdXJsDQogICAgICAgIH0NCiAgICAgICAgdmFyIF9zZWxmID0gdGhpczsNCiAgICAgICAgYWRhcHRlci5nZXRVc2VyVG9rZW4oZGF0YSwgZnVuY3Rpb24ocmVzKXsNCiAgICAgICAgICBjb25zdCB0b2tlbiA9IHJlcy5kYXRhLmFjY2Vzc190b2tlbjsNCiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHRva2VuKTsNCiAgICAgICAgICBfc2VsZi5nZXRVc2VySW5mbyh0b2tlbik7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogIH07DQo="},{"version":3,"sources":["/Users/shonichikun/Downloads/西浦资料/authorityForecast/src/frameworks/transition.vue"],"names":[],"mappings":"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,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACtC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACnC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACtC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1B,CAAC,CAAC;MACJ;IACF,CAAC;EACH,CAAC","file":"/Users/shonichikun/Downloads/西浦资料/authorityForecast/src/frameworks/transition.vue","sourceRoot":"","sourcesContent":["<style lang=\"scss\" scoped>\r\n  .login {\r\n    height: 100vh;\r\n    background: url(~@/assets/img/bg_shadow.png) no-repeat center center;\r\n    background-size: cover;\r\n    overflow: hidden;\r\n  }\r\n</style>\r\n<template>\r\n  <div class=\"login\" v-loading=\"loading\"></div>\r\n</template>\r\n<script>\r\n  import constant from \"@/assets/js/constant\";\r\n  export default {\r\n    name: \"transition\",\r\n    data() {\r\n      return {\r\n        loading: true,\r\n      };\r\n    },\r\n    created() {\r\n      // cas重定向回来的 url中获取 code参数\r\n      let code = util.getCode();\r\n      if (code) {\r\n        // 根据 code获取 token\r\n        this.getTokenByCode(code);\r\n      }\r\n      else {\r\n        util.login();\r\n      }\r\n    },\r\n    mounted() { },\r\n    methods: {\r\n      getUserInfo(token) {\r\n        adapter.getUserInfo({access_token: token}, function(res) {\r\n          if (res.data) {\r\n              var userInfo = res.data.data;\r\n              sessionStorage.setItem(\"userId\", userInfo.id);\r\n              sessionStorage.setItem(\"userInfo\", JSON.stringify(userInfo));\r\n              adapter.getUserRole({\r\n                  access_token: token,\r\n                  offset: -1\r\n                }, function(tData) {\r\n                console.log(tData.data);\r\n                var roles = tData.data.data || []\r\n                sessionStorage.setItem(\"roles\", JSON.stringify(roles));\r\n                location.href = location.protocol + \"//\" + location.host;\r\n              }, {\r\n                userId: userInfo.id\r\n              })\r\n              \r\n            }\r\n        })\r\n      },\r\n      getTokenByCode(code) {\r\n        var url = location.protocol + \"//\" + location.host;\r\n        var data = {\r\n          \"grant_type\":  \"authorization_code\",\r\n          \"client_id\": constant.appId,\r\n          \"code\": code,\r\n          \"client_secret\": constant.client_secret,\r\n          \"redirect_uri\" : url\r\n        }\r\n        var _self = this;\r\n        adapter.getUserToken(data, function(res){\r\n          const token = res.data.access_token;\r\n          sessionStorage.setItem(\"token\", token);\r\n          _self.getUserInfo(token);\r\n        });\r\n      }\r\n    },\r\n  };\r\n</script>"]}]}