{"remainingRequest":"E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\babel-loader\\lib\\index.js!E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\src\\modules\\user.vue?vue&type=template&id=2ca6802c","dependencies":[{"path":"E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\src\\modules\\user.vue","mtime":1657014450000},{"path":"E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\babel.config.js","mtime":1654570980000},{"path":"E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZVNsb3RzIGFzIF9jcmVhdGVTbG90cywgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2sgfSBmcm9tICJ2dWUiOwpjb25zdCBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAibW9kdWxlSXRlbUFyZWEiCn07CmNvbnN0IF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJ0b3BPcHRpb25BcmVhIgp9OwoKY29uc3QgX2hvaXN0ZWRfMyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCLmlrDlop7nlKjmiLciKTsKCmNvbnN0IF9ob2lzdGVkXzQgPSB7CiAgY2xhc3M6ICJ0YWJsZUluZm9BcmVhIgp9Owpjb25zdCBfaG9pc3RlZF81ID0gewogIGNsYXNzOiAiZGlhbG9nLWZvb3RlciIKfTsKCmNvbnN0IF9ob2lzdGVkXzYgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgi5Y+WIOa2iCIpOwoKY29uc3QgX2hvaXN0ZWRfNyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCLnoa4g5a6aIik7CgpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIGNvbnN0IF9jb21wb25lbnRfZWxfYnV0dG9uID0gX3Jlc29sdmVDb21wb25lbnQoImVsLWJ1dHRvbiIpOwoKICBjb25zdCBfY29tcG9uZW50X0RhdGFUYWJsZSA9IF9yZXNvbHZlQ29tcG9uZW50KCJEYXRhVGFibGUiKTsKCiAgY29uc3QgX2NvbXBvbmVudF9Gb3JtSW5mbyA9IF9yZXNvbHZlQ29tcG9uZW50KCJGb3JtSW5mbyIpOwoKICBjb25zdCBfY29tcG9uZW50X2VsX2RpYWxvZyA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1kaWFsb2ciKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgc2l6ZTogImRlZmF1bHQiLAogICAgdHlwZTogInByaW1hcnkiLAogICAgb25DbGljazogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSAkZXZlbnQgPT4gJG9wdGlvbnMuaGFuZGxlT3BlbkRpYWxvZygpKQogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfaG9pc3RlZF8zXSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNCwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0RhdGFUYWJsZSwgewogICAgZGF0YU9iajogJGRhdGEuZGF0YUluZm8sCiAgICBvbkJ1dHRvbkNsaWNrOiAkb3B0aW9ucy5oYW5kbGVCdXR0b25DbGljaywKICAgIG9uUGFnZUNoYW5nZTogJG9wdGlvbnMuaGFuZGxlUGFnZUNoYW5nZQogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJkYXRhT2JqIiwgIm9uQnV0dG9uQ2xpY2siLCAib25QYWdlQ2hhbmdlIl0pXSldKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZGlhbG9nLCB7CiAgICB0aXRsZTogJGRhdGEuYWRkRGlhbG9nUGFyYW0udGl0bGUsCiAgICBtb2RlbFZhbHVlOiAkZGF0YS5hZGREaWFsb2dQYXJhbS52aXNpYmxlLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbM10gfHwgKF9jYWNoZVszXSA9ICRldmVudCA9PiAkZGF0YS5hZGREaWFsb2dQYXJhbS52aXNpYmxlID0gJGV2ZW50KSwKICAgIHdpZHRoOiAkZGF0YS5hZGREaWFsb2dQYXJhbS53aWR0aAogIH0sIF9jcmVhdGVTbG90cyh7CiAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfRm9ybUluZm8sIHsKICAgICAgcmVmOiAiZGlhbG9nRm9ybSIsCiAgICAgIGRhdGFPYmo6ICRkYXRhLmFkZERpYWxvZ1BhcmFtLmZvcm1EYXRhCiAgICB9LCBudWxsLCA4CiAgICAvKiBQUk9QUyAqLwogICAgLCBbImRhdGFPYmoiXSldKSwKICAgIF86IDIKICAgIC8qIERZTkFNSUMgKi8KCiAgfSwgWyRkYXRhLmFkZERpYWxvZ1BhcmFtLndpdGhGb290ZXIgPyB7CiAgICBuYW1lOiAiZm9vdGVyIiwKICAgIGZuOiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIF9ob2lzdGVkXzUsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgc2l6ZTogImRlZmF1bHQiLAogICAgICBvbkNsaWNrOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9ICRldmVudCA9PiAkZGF0YS5hZGREaWFsb2dQYXJhbS52aXNpYmxlID0gZmFsc2UpCiAgICB9LCB7CiAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfaG9pc3RlZF82XSksCiAgICAgIF86IDEKICAgICAgLyogU1RBQkxFICovCgogICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgICBzaXplOiAiZGVmYXVsdCIsCiAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgb25DbGljazogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSAkZXZlbnQgPT4gJGRhdGEuYWRkRGlhbG9nUGFyYW0udmlzaWJsZSA9ICRvcHRpb25zLmNvbmZpcm1Vc2VyRGlhbG9nKCkpCiAgICB9LCB7CiAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfaG9pc3RlZF83XSksCiAgICAgIF86IDEKICAgICAgLyogU1RBQkxFICovCgogICAgfSldKV0pCiAgfSA6IHVuZGVmaW5lZF0pLCAxMDMyCiAgLyogUFJPUFMsIERZTkFNSUNfU0xPVFMgKi8KICAsIFsidGl0bGUiLCAibW9kZWxWYWx1ZSIsICJ3aWR0aCJdKV0sIDY0CiAgLyogU1RBQkxFX0ZSQUdNRU5UICovCiAgKTsKfQ=="},{"version":3,"mappings":";;EACKA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;iDAC4D;;;EAElEA,KAAK,EAAC;;;EAOHA,KAAK,EAAC;;;iDACwD;;iDAC8B;;;;;;;;;;;6DAbtGC,oBAOM,KAPN,cAOM,CANJA,oBAEM,KAFN,cAEM,CADJC,aAAqFC,oBAArF,EAAqF;IAA1EC,IAAI,EAAC,SAAqE;IAA3DC,IAAI,EAAC,SAAsD;IAA3CC,OAAK,sCAAEC,2BAAF;EAAsC,CAArF;sBAAqE,MAAI;;;;GAAzE,CACI,CAFN,CAMI,EAHJN,oBAEM,KAFN,cAEM,CADJC,aAA6GM,oBAA7G,EAA6G;IAAjGC,OAAO,EAAEC,cAAwF;IAA7EC,aAAY,EAAEJ,0BAA+D;IAA3CK,YAAW,EAAEL;EAA8B,CAA7G;;EAAA,+CACI,CAFN,CAGI,CAPN,GAQAL,aAQYW,oBARZ,EAQY;IARAC,KAAK,EAAEJ,qBAAeI,KAQtB;gBARsCJ,qBAAeK,OAQrD;+DARsCL,qBAAeK,UAAOC,OAQ5D;IAR+DC,KAAK,EAAEP,qBAAeO;EAQrF,CARZ;sBACE,MAAyE,CAAzEf,aAAyEgB,mBAAzE,EAAyE;MAA/DC,GAAG,EAAC,YAA2D;MAA7CV,OAAO,EAAEC,qBAAeU;IAAqB,CAAzE;;IAAA,cAAyE;;;;MACjDV,qBAAeW;UAA5B;iBACT,MAGO,CAHPpB,oBAGO,MAHP,cAGO,CAFLC,aAAiFC,oBAAjF,EAAiF;MAAtEC,IAAI,EAAC,SAAiE;MAAtDE,OAAK,sCAAEI,qBAAeK,OAAf,GAAsB,KAAxB;IAAiD,CAAjF;wBAAkE,MAAG;;;;KAArE,CAEK,EADLb,aAA+GC,oBAA/G,EAA+G;MAApGC,IAAI,EAAC,SAA+F;MAArFC,IAAI,EAAC,SAAgF;MAArEC,OAAK,sCAAEI,qBAAeK,OAAf,GAAyBR,4BAA3B;IAAgE,CAA/G;wBAAgG,MAAG;;;;KAAnG,CACK,CAHP,CAGO;iBANX;;EAAA","names":["class","_createElementVNode","_createVNode","_component_el_button","size","type","onClick","$options","_component_DataTable","dataObj","$data","onButtonClick","onPageChange","_component_el_dialog","title","visible","$event","width","_component_FormInfo","ref","formData","withFooter"],"sourceRoot":"","sources":["E:\\golaxy\\zstp\\西浦大学\\authorityForecast\\src\\modules\\user.vue"],"sourcesContent":["<template>\r\n<div class=\"moduleItemArea\">\r\n  <div class=\"topOptionArea\">\r\n    <el-button size=\"default\" type=\"primary\" @click=\"handleOpenDialog()\">新增用户</el-button>\r\n  </div>\r\n  <div class=\"tableInfoArea\">\r\n    <DataTable :dataObj=\"dataInfo\" @button-click=\"handleButtonClick\" @page-change=\"handlePageChange\"></DataTable>\r\n  </div>\r\n</div>\r\n<el-dialog :title=\"addDialogParam.title\" v-model=\"addDialogParam.visible\" :width=\"addDialogParam.width\">\r\n  <FormInfo ref=\"dialogForm\" :dataObj=\"addDialogParam.formData\"></FormInfo>\r\n  <template #footer v-if=\"addDialogParam.withFooter\">\r\n    <span class=\"dialog-footer\">\r\n      <el-button size=\"default\" @click=\"addDialogParam.visible = false\">取 消</el-button>\r\n      <el-button size=\"default\" type=\"primary\" @click=\"addDialogParam.visible = confirmUserDialog() \">确 定</el-button>\r\n    </span>\r\n  </template>\r\n</el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport DataTable from \"./../components/dataTable\";\r\nimport FormInfo from \"./../components/formInfo\";\r\nimport constant from './../assets/js/constant';\r\nexport default {\r\n  name: '',\r\n  components: {\r\n    DataTable,\r\n    FormInfo\r\n  },\r\n  data() {\r\n    return {\r\n      appId: constant.appId,\r\n      token: sessionStorage.getItem('token'),\r\n      roles: [],\r\n      addDialogParam: {\r\n        title: \"新增用户\",\r\n        visible: false,\r\n        width: \"600px\",\r\n        withFooter: true,\r\n        formData: {\r\n          labelWidth: \"80px\",\r\n          result: {\r\n            name: \"\",\r\n            password: \"\",\r\n            realName: \"\",\r\n            roles: []\r\n          },\r\n          data: [{\r\n            key: 'name',\r\n            name: '用户名',\r\n            value: '',\r\n            type: 'text',\r\n            size: 'default',\r\n            items: [{\r\n              placeholder: '请输入用户名',\r\n            }, ],\r\n          }, {\r\n            key: 'password',\r\n            name: '登录密码',\r\n            value: '',\r\n            type: 'text',\r\n            showPassword: true,\r\n            size: 'default',\r\n            items: [{\r\n              placeholder: '请输入密码',\r\n            }, ],\r\n          }, {\r\n            key: 'realName',\r\n            name: '姓名',\r\n            value: '',\r\n            type: 'text',\r\n            size: 'default',\r\n            items: [{\r\n              placeholder: '请输入姓名',\r\n            }, ],\r\n          }, {\r\n            key: 'roles',\r\n            name: '所属角色',\r\n            value: '',\r\n            type: 'select',\r\n            multiple: true,\r\n            size: 'default',\r\n            items: [{\r\n              type: \"select\",\r\n              multiple: true,\r\n              placeholder: '请输入角色',\r\n              options: []\r\n            }, ],\r\n          }]\r\n        }\r\n      },\r\n      dataInfo: {\r\n        withIndex: true,\r\n        maxHeight: document.body.clientHeight - 200,\r\n        map: {\r\n          createTime: function (v) {\r\n            return util.transformPHPTime(v);\r\n          }\r\n        },\r\n        header: [{\r\n          //prop标识该元素所代表的数据列与data数组元素的哪个属性绑定\r\n          prop: 'name',\r\n          //label标识该元素所代表的数据列头名称标签\r\n          label: '用户名',\r\n        }, {\r\n          prop: 'realName',\r\n          label: '姓名',\r\n          width: '150',\r\n        }, {\r\n          prop: 'roleName',\r\n          label: '所属角色',\r\n          width: '150',\r\n        }, {\r\n          prop: 'createTime',\r\n          label: '创建时间',\r\n          width: '180',\r\n        }, {\r\n          prop: 'user',\r\n          label: '操作',\r\n          width: '220',\r\n          buttons: [{\r\n              label: '删除',\r\n              eventName: 'deleteItem',\r\n              size: 'default',\r\n            }, {\r\n              label: '重置密码',\r\n              eventName: 'resetPassword',\r\n              size: 'default',\r\n            },\r\n            {\r\n              label: '编辑',\r\n              eventName: 'editItem',\r\n              size: 'default',\r\n            }\r\n          ],\r\n        }],\r\n        data: [],\r\n        page: {\r\n           //background标识分页条是否有背景，有的话背景是什么\r\n          background: false,\r\n          //sizes标识当前分页条支持每页最多显示记录数可以切换的数值\r\n          sizes: [15, 30, 45, 60],\r\n          //pageSize标识当前分页条每页最多显示条数\r\n          pageSize: 15,\r\n          //layout标识当前分页条包含的操作元素\r\n          layout: 'total, sizes, prev, pager, next, jumper',\r\n          //total标识当前分页条对应数据总量总条数\r\n          total: 10,\r\n          currentPage: 1\r\n        }\r\n      }\r\n    };\r\n  },\r\n  watch: {\r\n    $route(to, from) {\r\n\r\n    },\r\n  },\r\n  computed: {\r\n\r\n  },\r\n  created() {\r\n    this.updateTabeInfo();\r\n    this.updateRoleSelector();\r\n  },\r\n  methods: {\r\n    confirmUserDialog() {\r\n      var _self = this;\r\n      var param = this.$refs.dialogForm.getFormValue();\r\n      var data = this.addDialogParam.current || {};\r\n      var d = {\r\n        \"appId\": this.appId,\r\n        \"name\": param.name,\r\n        \"realName\": param.realName,\r\n        \"password\": data.password || param.password,\r\n        \"id\": data.id || \"-1\",\r\n        \"idleTime\": data.idleTime || 86400,\r\n        \"expirTime\": data.expirTime || 86400,\r\n        \"loginFlag\": data.loginFlag || \"0\",\r\n        \"phone\": data.phone || \"\",\r\n        \"remarks\":  data.remarks || \"\"\r\n      }\r\n      if(!this.addDialogParam.flag) {\r\n         adapter.addUserItem(d, function (tData) {\r\n          if (tData.data.code === 200) {\r\n            var d = tData.data.data;\r\n            _self.setUserInfo(d.id, param.roles);\r\n          }\r\n        }, {\r\n          token: this.token\r\n        })\r\n      }\r\n      else {\r\n        adapter.updateUserItem(d, function (tData) {\r\n          if (tData.data.code === 200) {\r\n            _self.setUserInfo(d.id, param.roles, _self.addDialogParam.flag);\r\n          }\r\n        }, {\r\n          token: this.token\r\n        })\r\n      }\r\n     \r\n      return false;\r\n    },\r\n    setUserInfo(user, roles, flag) {\r\n      console.log(user, roles);\r\n      var _self = this;\r\n      if(!flag) {\r\n        adapter.setUserApplication([this.appId], function (tData) {\r\n          if (tData.data.code === 200) {\r\n            adapter.setUserRole(roles, function (tData) {\r\n              if (tData.data.code === 200) {\r\n                _self.$message({\r\n                  type: \"success\",\r\n                  message: \"添加用户成功。\"\r\n                });\r\n                _self.updateTabeInfo();\r\n              }\r\n            }, {\r\n              token: _self.token,\r\n              userId: user,\r\n              appId: _self.appId\r\n            })\r\n          }\r\n        }, {\r\n          token: this.token,\r\n          userId: user,\r\n        })\r\n      }\r\n      else {\r\n        adapter.setUserRole(roles, function (tData) {\r\n              if (tData.data.code === 200) {\r\n                _self.$message({\r\n                  type: \"success\",\r\n                  message: \"编辑用户成功。\"\r\n                });\r\n                _self.updateTabeInfo();\r\n              }\r\n            }, {\r\n              token: _self.token,\r\n              userId: user,\r\n              appId: _self.appId\r\n            })\r\n      }\r\n      \r\n\r\n    },\r\n    handleOpenDialog(data, flag) {\r\n      var result = {\r\n        name: \"\",\r\n        password: \"\",\r\n        realName: \"\",\r\n        roles: []\r\n      };\r\n      var item = this.addDialogParam.formData.data[0];\r\n      var tItem = this.addDialogParam.formData.data[1];\r\n      this.addDialogParam.flag = flag;\r\n      if (!flag) {\r\n        item.type = \"text\";\r\n        tItem.hide = false;\r\n        this.addDialogParam.title = \"新增用户\";\r\n      } else {\r\n        item.type = '';\r\n        // tItem.hide = true;\r\n        this.addDialogParam.title = \"编辑用户\";\r\n        this.addDialogParam.current = data;\r\n        result = {\r\n          name: data.name,\r\n          realName: data.realName,\r\n          roles: data.roleData.map(item => {\r\n            return item.id;\r\n          })\r\n        }\r\n      }\r\n\r\n      this.addDialogParam.formData.result = result;\r\n      if (this.$refs.dialogForm) {\r\n        this.$refs.dialogForm.updateFormValue(result);\r\n      }\r\n      this.addDialogParam.visible = true;\r\n    },\r\n    handleButtonClick(name, d) {\r\n      if (typeof this[name] === \"function\") {\r\n        this[name](d);\r\n      }\r\n    },\r\n    editItem(d) {\r\n      this.handleOpenDialog(d, true);\r\n    },\r\n    updateRoleSelector() {\r\n      var _self = this;\r\n      adapter.getAllRoles({\r\n        access_token: this.token,\r\n        offset: 0,\r\n      }, function (d) {\r\n        console.log(d.data.data);\r\n        _self.roles = d.data.data;\r\n        _self.addDialogParam.formData.data[3].items[0].options = _self.roles.map(item => {\r\n          item.label = item.name;\r\n          item.value = item.id;\r\n          return item;\r\n        });\r\n        // _self.roles[0] && (_self.appId = _self.roles[0].appId);\r\n      })\r\n    },\r\n    resetPassword(d) {\r\n      var _self = this;\r\n      this.$confirm('确定重置密码为: 123qwe吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n      }).then(() => {\r\n        adapter.resetPassword(d, function (tData) {\r\n          if (tData.data.code === 200) {\r\n            _self.$message({\r\n              type: \"success\",\r\n              message: \"重置密码成功(123qwe)!\"\r\n            })\r\n          }\r\n        }, {\r\n          token: this.token,\r\n          userId: d.id,\r\n          password: \"123qwe\"\r\n        });\r\n      })\r\n    },\r\n    deleteItem(d) {\r\n      var _self = this;\r\n      this.$confirm('确定删除吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n      }).then(() => {\r\n        adapter.deleteUserItem([d.id], function (tData) {\r\n          if (tData.data.code === 200) {\r\n            _self.$message({\r\n              type: \"success\",\r\n              message: \"删除用户成功!\"\r\n            });\r\n            _self.updateTabeInfo();\r\n          }\r\n\r\n        }, {\r\n          token: this.token,\r\n          appId: d.appId\r\n        });\r\n      })\r\n    },\r\n    handlePageChange(current, size) {\r\n      this.dataInfo.page.currentPage = current;\r\n      this.dataInfo.page.pageSize =  size;\r\n      this.updateTabeInfo();\r\n    },\r\n    updateTabeInfo() {\r\n      var _self = this;\r\n      adapter.getUserList({\r\n        access_token: this.token,\r\n        offset: (this.dataInfo.page.currentPage - 1) * this.dataInfo.page.pageSize,\r\n        count: this.dataInfo.page.pageSize\r\n      }, function (tData) {\r\n        _self.dataInfo.data = tData.data.data;\r\n        _self.dataInfo.page.total = tData.data.total;\r\n        _self.updateRoleInfo(_self.dataInfo.data);\r\n      })\r\n    },\r\n    updateRoleInfo(arr) {\r\n      for (let i = 0; i < arr.length; i++) {\r\n        this.getUserRole(arr[i]);\r\n      }\r\n    },\r\n    getUserRole(user) {\r\n      var _self = this;\r\n      adapter.getUserRole({\r\n        access_token: this.token,\r\n        offset: -1\r\n      }, function (tData) {\r\n        var roleData = tData.data.data;\r\n        var d = roleData.map(item => {\r\n          return item.name;\r\n        });\r\n        user.roleName = d.join(\",\");\r\n        user.roleData = roleData;\r\n      }, {\r\n        userId: user.id\r\n      })\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.moduleItemArea {\r\n  float: left;\r\n  width: 100%;\r\n  height: 100%;\r\n  filter: \"progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='scale')\";\r\n  -moz-background-size: 100% 100%;\r\n  background-size: 100vw 100%;\r\n  display: block;\r\n  position: relative;\r\n}\r\n\r\n.topOptionArea {\r\n  padding: 15px 10px;\r\n  text-align: left;\r\n}\r\n\r\n.tableInfoArea {\r\n  width: 100%;\r\n  height: calc(100% - 65px);\r\n}\r\n</style>\r\n"]}]}